\Preamble{xhtml,mathjax,fn-in,svg}

\usepackage{graphicx}
\DeclareGraphicsExtensions{.svg,.png,.jpg,.jpeg,.gif,.pdf,.eps}
  \Configure{graphics*}
         {pdf}
         {\Needs{"gs -o \csname Gin@base\endcsname.png -r150 -sDEVICE=pngalpha -dTextAlphaBits=4 -dGraphicsAlphaBits=4 \csname Gin@base\endcsname.pdf"}%
          \Picture[pict]{\csname Gin@base\endcsname.png}%
          \special{t4ht+@File: \csname Gin@base\endcsname.png}
         }
  \Configure{graphics*}
         {eps}
         {\Needs{"gs -o \csname Gin@base\endcsname.png -r150 -sDEVICE=pngalpha -dTextAlphaBits=4 -dGraphicsAlphaBits=4 \csname Gin@base\endcsname.eps"}%
          \Picture[pict]{\csname Gin@base\endcsname.png}%
          \special{t4ht+@File: \csname Gin@base\endcsname.png}
         }

\Configure{VERSION}{}
\Configure{DOCTYPE}{\HCode{<!DOCTYPE html>\Hnewline}}
\Configure{charset}{utf-8}
\Configure{HTML}{\HCode{<html>\Hnewline}}{\HCode{\Hnewline</html>}}

\Configure{@HEAD}{}
\Configure{@HEAD}{\HCode{<meta charset="UTF-8" />\Hnewline}}
\Configure{@HEAD}{\HCode{<meta name="generator" content="TeX4ht (https://tug.org/tex4ht/)" />\Hnewline}}

\Configure{@HEAD}{\HCode{<link
         rel="stylesheet" type="text/css"
         href="\expandafter\csname aa:CssFile\endcsname" />\Hnewline}}

\Configure{@HEAD}{\HCode{<!-- for beautifying --><link
         rel="stylesheet" type="text/css"
         href="canvas.css" />\Hnewline}}

\Configure{@HEAD}{\HCode{%
    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
            "TeX":{
                "extensions":["autoload-all.js"]
            },
            "tex2jax":{
                "ignoreClass":"mathjax_ignore"
            },
            "extensions":["Safe.js"],
            "Safe":{"safeProtocols":{"http":true,"https":true,"file":false,"javascript":false,"data":false}},
            "MathMenu":{
            "styles":{
                ".MathJax_Menu":{"z-index":2001}}
            },
            "showMathMenu":true,
            "messageStyle":"none"
            });
    </script>
      }}

\Configure{@HEAD}{\HCode{<script type="text/javascript"\Hnewline
src="http://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_SVG&amp;locale=en"\Hnewline
></script>\Hnewline}}

\Css{.MathJax_MathML {text-indent: 0;}}

\Css{body {
	font-family: Minion Pro, Baskerville, Garamond, EB Garamond, Georgia, serif;
	font-size: 18px;
	line-height: 1.5;
	max-width: 40em;
	margin: auto;
}}

% Translate \textbf, \textit and \texttt directives into <strong>, <em> and <code>
\Configure{textbf}{\ifvmode\ShowPar\fi\HCode{<strong>}}{\HCode{</strong>}}
\Configure{textit}{\ifvmode\ShowPar\fi\HCode{<em>}}{\HCode{</em>}}
\Configure{texttt}{\ifvmode\ShowPar\fi\HCode{<code>}}{\HCode{</code>}}

% Translate verbatim and lstlisting blocks into <pre> elements
\ConfigureEnv{verbatim}{\HCode{<pre>}}{\HCode{</pre>}}{}{}
\ConfigureEnv{lstlisting}{\HCode{<pre>}}{\HCode{</pre>}}{}{}

% Do not set `indent`/`noindent` classes on paragraphs
\Configure{HtmlPar}
{\EndP\Tg<p>}
{\EndP\Tg<p>}
{\HCode{</p>\Hnewline}}
{\HCode{</p>\Hnewline}}

\Css{.titleHead, .sectionHead, .subsectionHead, .textsf {
	font-family: Myriad Pro, Helvetica, Arial, sans-serif;
}}

\Css{.titleHead, .sectionHead, .subsectionHead {
	color: FireBrick;
}}

\Css{.texttt, .verb, .pre {
    font-family: Inconsolata, Consolas, Courier, monospace;
}}

\Css{.titleHead {
	font-size: 32px;
}}

\Css{.sectionHead {
	font-size: 28px;
}}

\Css{.subsectionHead {
	font-size: 24px;
}}

\Css{.titlemark {
	display: inline-block;
	width: 2em;
}}

\Css{.figure img {
    display: block;
    margin: auto;
}}

% Define a helper macro to wrap environments in a named DIV

\newcommand\ConfigEnv[1]{%
  \ConfigureEnv{#1}%
    {\ifvmode\IgnorePar\fi\EndP\HCode{<div class="card #1">}\IgnorePar}%
    {\ifvmode\IgnorePar\fi\EndP\IgnorePar\HCode{</div>}\IgnorePar}%
    {}{}%
}

% Apply this macro to EVERY environment you want to style as a card

% Plain Style mathematical statements
\ConfigEnv{theorem}
\ConfigEnv{proposition}
\ConfigEnv{lemma}
\ConfigEnv{corollary}
\ConfigEnv{conjecture}
\ConfigEnv{criterion}
\ConfigEnv{fact}
\ConfigEnv{paradox}
\ConfigEnv{claim}

% Definition style environments
\ConfigEnv{definition}
\ConfigEnv{axiom}
\ConfigEnv{example}
\ConfigEnv{algorithm}
\ConfigEnv{condition}
\ConfigEnv{formula}
\ConfigEnv{idea}

% Remark/Note Group
\ConfigEnv{remark}
\ConfigEnv{notation}
\ConfigEnv{explanation}
\ConfigEnv{observation}
\ConfigEnv{conclusion}
\ConfigEnv{summary}
\ConfigEnv{proof}
\ConfigEnv{aside}

% Warning/Danger Group
\ConfigEnv{warning}

\begin{document}
\EndPreamble
